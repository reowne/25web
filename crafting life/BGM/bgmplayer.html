<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>BGM Player</title>
</head>
<body>
  <audio id="bgm" src="../BGM/BGM.mp3" loop autoplay></audio>
  <script>
    const bgm = document.getElementById('bgm');

    const savedVolume = localStorage.getItem('bgmVolume');
    const enabled = localStorage.getItem('bgmEnabled');

    bgm.volume = savedVolume ? parseFloat(savedVolume) : 0.5;

    if (enabled === 'true') {
      bgm.play().catch(e => console.log('Autoplay 차단:', e));
    } else {
      bgm.pause();
    }

    window.addEventListener('storage', () => {
      const enabled = localStorage.getItem('bgmEnabled');
      const vol = localStorage.getItem('bgmVolume');
      bgm.volume = vol ? parseFloat(vol) : 0.5;
      if (enabled === 'true') {
        bgm.play();
      } else {
        bgm.pause();
      }
    });
  </script>
</body>
</html>
